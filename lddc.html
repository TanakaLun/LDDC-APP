<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
<title>LLDC 原型（精简）</title>
<style>
  :root{
    --primary:#5B7CFF; --ink:#121212; --ink-2:#6A6F7B; --ink-3:#9AA0AB;
    --bg:#F6F7FA; --card:#FFFFFF; --divider:#E8EAF0; --radius:14px; --shadow:0 6px 18px rgba(23,38,75,.08);
  }
  *{box-sizing:border-box} html,body{height:100%;margin:0;background:#F3F5FA;color:var(--ink);
    font:14px/1.5 -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,"PingFang SC","Hiragino Sans GB","Microsoft YaHei",sans-serif}
  .stage{max-width:420px;margin:24px auto;background:transparent;border-radius:24px;overflow:hidden;height:86vh;min-height:640px;
    border:1px solid rgba(140,151,180,.18);box-shadow:0 10px 30px rgba(40,58,105,.12), inset 0 1px 0 rgba(255,255,255,.5);
    display:flex;flex-direction:column}
  .content{padding:14px;overflow:auto;flex:1;background:transparent}
  .section{display:none}.section.active{display:block}
  .search-row{display:flex;gap:10px;align-items:center;margin-bottom:12px;position:relative}
  .icon-btn{width:40px;height:40px;border-radius:12px;border:1px solid var(--divider);background:#fff;display:grid;place-items:center;cursor:pointer}
  .icon-24{width:20px;height:20px;opacity:.9}
  .pill{border:1px solid var(--divider);background:#fff;border-radius:12px;height:44px;padding:0 12px;display:flex;align-items:center;gap:8px;flex:1}
  .pill input{border:none;outline:none;background:transparent;width:100%}
  .btn{height:44px;padding:0 16px;border-radius:12px;border:none;cursor:pointer;background:var(--primary);color:#fff;font-weight:600}
  .btn.ghost{background:#fff;color:var(--ink);border:1px solid var(--divider)}
  .card{background:var(--card);border-radius:16px;box-shadow:var(--shadow);border:1px solid rgba(140,151,180,.16)}
  .list{display:flex;flex-direction:column;gap:12px}
  .song{padding:14px;border-radius:14px;display:grid;grid-template-columns:1fr;gap:6px;align-items:center;border:1px solid var(--divider);background:#fff}
  .song:hover{background:#fff}
  .song-title{font-size:16px;font-weight:700}
  .song-sub{font-size:13px;color:var(--ink-2)}
  .song-meta{font-size:12px;color:var(--ink-3)}
  .row{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-radius:12px;background:#fff;border:1px solid var(--divider)}
  .row .l{display:flex;flex-direction:column}.row .t{font-weight:700}.row .d{font-size:12px;color:var(--ink-3)}
  .switch{appearance:none;width:48px;height:28px;border-radius:999px;background:#D4DAE8;position:relative;cursor:pointer}
  .switch:checked{background:var(--primary)} .switch::after{content:"";position:absolute;top:3px;left:3px;width:22px;height:22px;border-radius:50%;background:#fff;transition:.2s}
  .switch:checked::after{left:23px}
  .select{height:36px;border-radius:10px;border:1px solid var(--divider);padding:0 10px;background:#fff}
  .bottom{height:64px;background:#fff;border-top:1px solid var(--divider);display:grid;grid-template-columns:repeat(3,1fr);align-items:center}
  .tab{display:grid;place-items:center;gap:2px;color:var(--ink-2);cursor:pointer;padding:6px}
  .tab.active{color:var(--ink)}
  .ico{width:20px;height:20px}
    .panel{padding:14px;margin:10px 0;display:none}
  .popover{position:absolute; top:48px; left:0; width:100%; background:#fff; border:1px solid var(--divider); border-radius:12px; padding:10px; box-shadow:var(--shadow); z-index:10; display:none}
  .chk{display:flex; align-items:center; gap:8px; padding:6px 2px; font-size:14px; color:var(--ink)}
  #searchList{background:transparent;border:0;box-shadow:none}
  .lyrics-area{white-space:pre-wrap; background:#fff; border:1px solid var(--divider); border-radius:12px; padding:12px; min-height:260px; font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;}
  .lyrics-btns{display:grid; grid-template-columns:repeat(3,1fr); gap:8px}
  </style>
</head>
<body>
<div class="stage" id="app">
  <div class="content">
    <!-- 搜索 -->
    <section class="section active" id="sec-search">
      <div class="search-row">
        <button class="icon-btn" title="选择来源" id="sourceBtn">
          <svg class="icon-24" viewBox="0 0 24 24" fill="none"><path d="M12 4l7 4v8l-7 4-7-4V8l7-4z" stroke="currentColor" stroke-width="2"/></svg>
        </button>
        <label class="pill">
          <svg class="icon-24" viewBox="0 0 24 24" fill="none"><circle cx="11" cy="11" r="7" stroke="currentColor" stroke-width="2"/><path d="M20 20l-3-3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
          <input id="q" placeholder="输入歌曲名或歌手"/>
        </label>
        <button class="btn" id="doSearch">搜索</button>
        <div id="sourcePanel" class="popover">
          <div style="font-weight:700; margin-bottom:6px;">选择音源</div>
          <label class="chk"><input type="checkbox" value="qq" checked> QQ音乐</label>
          <label class="chk"><input type="checkbox" value="kugou" checked> 酷狗音乐</label>
          <label class="chk"><input type="checkbox" value="kuwo" checked> 酷我音乐</label>
          <label class="chk"><input type="checkbox" value="netease" checked> 网易云音乐</label>
          <div style="display:flex; gap:8px; justify-content:flex-end; margin-top:8px;">
            <button class="btn ghost" id="srcCancel">取消</button>
            <button class="btn" id="srcApply">应用</button>
          </div>
        </div>
      </div>

      <div class="list" id="searchList">
        <div class="song">
          <div>
            <div class="song-title">光年之外</div>
            <div class="song-sub">邓紫棋 · Single</div>
            <div class="song-meta">03:55 · 来自 Netease</div>
          </div>
        </div>
        <div class="song">
          <div>
            <div class="song-title">稻香</div>
            <div class="song-sub">周杰伦 · 魔杰座</div>
            <div class="song-meta">03:44 · 来自 QQ</div>
          </div>
        </div>
      </div>
    </section>

    <!-- 歌词 -->
    <section class="section" id="sec-lyrics">
      <div style="display:flex; align-items:center; gap:8px; margin-bottom:10px;">
        <button class="icon-btn" id="lyricsBack" title="返回">
          <svg class="icon-24" viewBox="0 0 24 24" fill="none"><path d="M15 18l-6-6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </button>
        <div id="lyricsTitle" style="font-weight:700">歌词</div>
      </div>
      <div class="card" style="padding:14px; display:grid; gap:10px;">
        <div id="lyricsText" class="lyrics-area">[00:00.00] 请选择一首歌曲以查看歌词</div>
        <div class="lyrics-btns">
          <button class="btn ghost" id="copyLyrics">复制歌词</button>
          <button class="btn ghost" id="embedLyrics">内嵌歌词</button>
          <button class="btn" id="saveLyrics">保存歌词</button>
        </div>
      </div>
    </section>

    <!-- 匹配 -->
    <section class="section" id="sec-match">
      <div class="card" style="padding:14px; display:flex; gap:10px; align-items:center; margin-bottom:12px;">
        <div style="flex:1">
          <div class="song-title">当前文件夹：未选择</div>
          <div class="song-sub">请选择用于匹配的文件夹</div>
        </div>
        <button class="btn ghost" id="pickFolder">选择文件夹</button>
      </div>

              <div class="card" style="padding:14px; display:grid; gap:10px; min-height:320px;">
          <div class="t" style="font-weight:700">匹配日志</div>
          <div id="matchLog" style="flex:1; min-height:180px; background:#FAFBFF; border:1px dashed var(--divider); border-radius:10px; padding:10px; overflow:auto; font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace; font-size:12px; color:var(--ink-2);"></div>
          <div style="display:flex; align-items:center; gap:10px;">
            <div style="flex:1; height:8px; background:#E6E9F2; border-radius:999px; overflow:hidden;">
              <div id="progressBar" style="height:100%; width:0%; background:linear-gradient(90deg, var(--primary), #7EA0FF);"></div>
            </div>
            <span id="progressText" style="font-size:12px; color:var(--ink-3); width:38px; text-align:right;">0%</span>
          </div>
        </div>

        <div class="card" style="padding:12px; position:sticky; bottom:12px; display:flex; align-items:center; gap:10px;">
          <div style="font-weight:700;">时间轴偏移(ms)</div>
          <button class="icon-btn" data-step="-50" title="-50ms">
            <svg class="icon-24" viewBox="0 0 24 24" fill="none"><path d="M6 12h12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
          </button>
          <input id="offsetInput" type="number" value="0" step="50" style="width:100px; height:36px; border:1px solid var(--divider); border-radius:8px; padding:0 8px;"/>
          <button class="icon-btn" data-step="50" title="+50ms">
            <svg class="icon-24" viewBox="0 0 24 24" fill="none"><path d="M12 6v12M6 12h12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
          </button>
          <div style="flex:1"></div>
          <button class="btn" id="autoMatch">开始匹配</button>
        </div>
    </section>

    <!-- 设置（对齐 SettingsFragment.kt） -->
    <section class="section" id="sec-settings">
      <div class="row" id="apiSettingsRow">
        <div class="l">
          <div class="t">API 设置</div>
          <div class="d">服务器地址：<span id="apiServerUrlSummary">http://127.0.0.1:8000/</span></div>
        </div>
        <svg class="ico" viewBox="0 0 24 24"><path d="M9 6l6 6-6 6" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"/></svg>
      </div>

      <div class="row">
        <div class="l">
          <div class="t">使用默认文件名</div>
          <div class="d">保存歌词时使用歌名.歌手作为文件名</div>
        </div>
        <input type="checkbox" class="switch" id="useDefaultFilename">
      </div>

      <div class="row">
        <div class="l">
          <div class="t">增强型 LRC</div>
          <div class="d">启用扩展 LRC 格式增强解析</div>
        </div>
        <input type="checkbox" class="switch" id="useEnhancedLrc">
      </div>

      <div class="row" id="lyricsPathRow">
        <div class="l">
          <div class="t">歌词保存路径</div>
          <div class="d" id="lyricsPathText">未设置</div>
        </div>
        <button class="btn ghost" id="chooseDirBtn">设置</button>
      </div>

      <div class="row">
        <div class="l">
          <div class="t">文件选择器</div>
          <div class="d">系统默认 / MT管理器</div>
        </div>
        <select class="select" id="filePickerSelect">
          <option value="default">系统默认</option>
          <option value="mt_manager">MT管理器</option>
        </select>
      </div>

      <div class="row" id="aboutRow">
        <div class="l">
          <div class="t">关于</div>
          <div class="d">LLDC · 版本 1.0</div>
        </div>
        <span style="font-size:12px;color:var(--ink-3)">开源</span>
      </div>

      <!-- API 设置编辑面板 -->
      <div class="card panel" id="apiPanel">
        <div style="font-weight:700; margin-bottom:6px;">设置 API 服务器地址</div>
        <label class="pill" style="height:42px;">
          <span style="color:var(--ink-3);margin-right:8px;">Base URL</span>
          <input id="apiBaseInput" placeholder="http://127.0.0.1:8000/"/>
        </label>
        <div style="display:flex; gap:8px; justify-content:flex-end; margin-top:10px;">
          <button class="btn ghost" id="apiCancel">取消</button>
          <button class="btn" id="apiSave">保存</button>
        </div>
      </div>

      <!-- 目录设置面板（文本模拟） -->
      <div class="card panel" id="dirPanel">
        <div style="font-weight:700; margin-bottom:6px;">设置歌词保存路径</div>
        <label class="pill" style="height:42px;">
          <span style="color:var(--ink-3);margin-right:8px;">路径名称</span>
          <input id="dirNameInput" placeholder="如：Music/Lyrics"/>
        </label>
        <div style="display:flex; gap:8px; justify-content:flex-end; margin-top:10px;">
          <button class="btn ghost" id="dirCancel">取消</button>
          <button class="btn" id="dirSave">保存</button>
        </div>
      </div>
    </section>
  </div>

  <div class="bottom">
    <div class="tab active" data-nav="search">
      <svg class="ico" viewBox="0 0 24 24"><circle cx="11" cy="11" r="7" stroke="currentColor" stroke-width="2" fill="none"/><path d="M20 20l-3-3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
      <div>搜索</div>
    </div>
    <div class="tab" data-nav="match">
      <svg class="ico" viewBox="0 0 24 24"><path d="M4 12h16M4 8h10M4 16h10" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"/></svg>
      <div>匹配</div>
    </div>
    <div class="tab" data-nav="settings">
      <svg class="ico" viewBox="0 0 24 24"><path d="M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6z" stroke="currentColor" stroke-width="2" fill="none"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.07a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.07a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06A2 2 0 1 1 7.02 3.4l.06.06a1.65 1.65 0 0 0 1.82.33h.1A1.65 1.65 0 0 0 10 2.29V2a2 2 0 1 1 4 0v.07c0 .67.39 1.28 1 1.51h.1a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82v.1c.23.61.84 1 1.51 1H22a2 2 0 1 1 0 4h-.07a1.65 1.65 0 0 0-1.51 1z" stroke="currentColor" stroke-width="1.6" fill="none"/></svg>
      <div>设置</div>
    </div>
  </div>
</div>

<script>
  let currentSongTitle = '';
  // 本地存储键与默认值（对齐 SettingsFragment.kt）
  const store = {
    api_url: localStorage.getItem('api_url') || 'http://127.0.0.1:8000/',
    use_default_filename: JSON.parse(localStorage.getItem('use_default_filename') || 'false'),
    use_enhanced_lrc: JSON.parse(localStorage.getItem('use_enhanced_lrc') || 'false'),
    lyrics_save_path_name: localStorage.getItem('lyrics_save_path_name') || '未设置',
    file_picker_choice: localStorage.getItem('file_picker_choice') || 'default'
  };

  // 底部导航
  const sections = {
    search: document.getElementById('sec-search'),
    match: document.getElementById('sec-match'),
    lyrics: document.getElementById('sec-lyrics'),
    settings: document.getElementById('sec-settings')
  };
  document.querySelectorAll('.tab').forEach(t=>{
    t.addEventListener('click', ()=>{
      const key = t.dataset.nav;
      document.querySelector('.tab.active').classList.remove('active');
      t.classList.add('active');
      document.querySelector('.section.active').classList.remove('active');
      sections[key].classList.add('active');
    });
  });

  // 搜索
  function attachSongClick(el){
    el.addEventListener('click', ()=>{
      sections.search.classList.remove('active');
      sections.lyrics.classList.add('active');
      const t = el.querySelector('.song-title')?.textContent || '';
      currentSongTitle = t;
      document.getElementById('lyricsTitle').textContent = t || '歌词';
      document.getElementById('lyricsText').textContent = '[00:00.00] ' + t + '\n[00:10.00] 示例歌词...';
    });
  }
  document.querySelectorAll('#searchList .song').forEach(attachSongClick);
  document.getElementById('doSearch').addEventListener('click', ()=>{
    const q = document.getElementById('q').value.trim();
    if(!q){alert('请输入关键词'); return;}
    const list = document.getElementById('searchList');
    const card = document.createElement('div');
    card.className='song';
    card.innerHTML = `
      <div>
        <div class="song-title">${q}（示例）</div>
        <div class="song-sub">未知歌手</div>
        <div class="song-meta">04:00 · 来自 Demo</div>
      </div>`;
    list.prepend(card);
    attachSongClick(card);
  });
  const sourceBtn = document.getElementById('sourceBtn');
  const sourcePanel = document.getElementById('sourcePanel');
  const srcApply = document.getElementById('srcApply');
  const srcCancel = document.getElementById('srcCancel');
  function hideSourcePanel(){ sourcePanel.style.display='none'; }
  function showSourcePanel(){ sourcePanel.style.display='block'; }
  sourceBtn.addEventListener('click', (e)=>{
    e.stopPropagation();
    const visible = sourcePanel.style.display==='block';
    (visible?hideSourcePanel:showSourcePanel)();
  });
  srcCancel.addEventListener('click', hideSourcePanel);
  srcApply.addEventListener('click', ()=>{
    const checked = Array.from(sourcePanel.querySelectorAll('input[type="checkbox"]:checked')).map(i=>i.value);
    localStorage.setItem('enabled_sources', JSON.stringify(checked));
    hideSourcePanel();
  });
  document.addEventListener('click', (e)=>{
    if(!sourcePanel.contains(e.target) && e.target!==sourceBtn){ hideSourcePanel(); }
  });

  // 匹配
  let offset=0;
  const offsetInput = document.getElementById('offsetInput');
  document.querySelectorAll('[data-step]').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      offset = parseInt(offsetInput.value||'0',10) + parseInt(btn.dataset.step,10);
      offsetInput.value = offset;
    });
  });
  function log(msg){
    const box = document.getElementById('matchLog');
    const time = new Date().toLocaleTimeString();
    box.innerText += `[${time}] ${msg}\n`;
    box.scrollTop = box.scrollHeight;
  }
  function setProgress(p){
    const bar = document.getElementById('progressBar');
    const txt = document.getElementById('progressText');
    bar.style.width = Math.max(0, Math.min(100,p)) + '%';
    txt.textContent = Math.max(0, Math.min(100,p)) + '%';
  }
  document.getElementById('autoMatch').addEventListener('click', ()=>{
    log('开始匹配...');
    setProgress(0);
    let p=0;
    const timer = setInterval(()=>{
      p+=10; setProgress(p); log('匹配进度 ' + p + '%');
      if(p>=100){ clearInterval(timer); log('匹配完成。应用偏移 ' + (offsetInput.value||0) + 'ms'); }
    }, 300);
  });

  // 设置：初始化显示
  const apiSummary = document.getElementById('apiServerUrlSummary');
  const useDefault = document.getElementById('useDefaultFilename');
  const useEnhanced = document.getElementById('useEnhancedLrc');
  const lyricsPathText = document.getElementById('lyricsPathText');
  const filePickerSelect = document.getElementById('filePickerSelect');

  function syncUI(){
    apiSummary.textContent = store.api_url;
    useDefault.checked = !!store.use_default_filename;
    useEnhanced.checked = !!store.use_enhanced_lrc;
    lyricsPathText.textContent = store.lyrics_save_path_name || '未设置';
    filePickerSelect.value = store.file_picker_choice;
  }
  syncUI();

  // 设置：API 地址编辑
  const apiPanel = document.getElementById('apiPanel');
  document.getElementById('apiSettingsRow').addEventListener('click', ()=>{
    apiPanel.style.display='block';
    document.getElementById('apiBaseInput').value = store.api_url;
  });
  document.getElementById('apiCancel').addEventListener('click', ()=> apiPanel.style.display='none');
  document.getElementById('apiSave').addEventListener('click', ()=>{
    const val = (document.getElementById('apiBaseInput').value || '').trim();
    store.api_url = val || 'http://127.0.0.1:8000/';
    localStorage.setItem('api_url', store.api_url);
    apiPanel.style.display='none'; syncUI();
  });

  // 设置：开关
  useDefault.addEventListener('change', ()=>{
    store.use_default_filename = useDefault.checked;
    localStorage.setItem('use_default_filename', JSON.stringify(store.use_default_filename));
  });
  useEnhanced.addEventListener('change', ()=>{
    store.use_enhanced_lrc = useEnhanced.checked;
    localStorage.setItem('use_enhanced_lrc', JSON.stringify(store.use_enhanced_lrc));
    alert(useEnhanced.checked ? '已启用增强型LRC格式' : '已禁用增强型LRC格式');
  });

  // 设置：保存路径
  const dirPanel = document.getElementById('dirPanel');
  document.getElementById('lyricsPathRow').addEventListener('click', ()=>{
    dirPanel.style.display='block';
    document.getElementById('dirNameInput').value = store.lyrics_save_path_name === '未设置' ? '' : store.lyrics_save_path_name;
  });
  document.getElementById('dirCancel').addEventListener('click', ()=> dirPanel.style.display='none');
  document.getElementById('dirSave').addEventListener('click', ()=>{
    const val = (document.getElementById('dirNameInput').value || '').trim();
    store.lyrics_save_path_name = val || '未设置';
    localStorage.setItem('lyrics_save_path_name', store.lyrics_save_path_name);
    dirPanel.style.display='none'; syncUI();
  });

  // 设置：文件选择器
  filePickerSelect.addEventListener('change', ()=>{
    store.file_picker_choice = filePickerSelect.value;
    localStorage.setItem('file_picker_choice', store.file_picker_choice);
    if(store.file_picker_choice === 'mt_manager'){
      // 对齐代码中的提示行为
      alert('已选择使用MT管理器作为文件选择器');
      // 同步“重置权限请求标志”的效果（原型不涉及具体权限，仅提示）
      localStorage.setItem('has_asked_for_all_files_permission','false');
      localStorage.setItem('has_asked_for_storage_permission','false');
    }else{
      alert('已选择使用系统默认文件选择器');
    }
  });

  // 关于
  document.getElementById('aboutRow').addEventListener('click', ()=>{
    alert('AboutActivity（原型示意）：LLDC\n开源 · 版本 1.0');
  });
  // 选择文件夹（原型模拟）
  (function(){
    const pickFolder = document.getElementById('pickFolder');
    if(pickFolder){
      pickFolder.addEventListener('click', ()=>{
        const name = prompt('输入文件夹名称（原型模拟）','Music');
        if(name){
          pickFolder.previousElementSibling.querySelector('.song-title').textContent = `当前文件夹：${name}`;
        }
      });
    }
  })();
  // 歌词页按钮交互（原型实现）
  (function(){
    const textEl = document.getElementById('lyricsText');
    const copyBtn = document.getElementById('copyLyrics');
    const embedBtn = document.getElementById('embedLyrics');
    const saveBtn = document.getElementById('saveLyrics');
    const backBtn = document.getElementById('lyricsBack');

    if(backBtn){
      backBtn.addEventListener('click', ()=>{
        sections.lyrics.classList.remove('active');
        sections.search.classList.add('active');
      });
    }

    if(copyBtn){
      copyBtn.addEventListener('click', async ()=>{
        try{ await navigator.clipboard.writeText(textEl.textContent||''); alert('歌词已复制'); }catch(e){ alert('复制失败'); }
      });
    }
    if(embedBtn){
      embedBtn.addEventListener('click', ()=>{
        alert('内嵌歌词（原型模拟）：选择音频文件并写入歌词');
      });
    }
    if(saveBtn){
      saveBtn.addEventListener('click', ()=>{
        const blob = new Blob([textEl.textContent||''], {type:'text/plain;charset=utf-8'});
        const a = document.createElement('a');
        const name = (currentSongTitle||'lyrics') + '.lrc';
        a.href = URL.createObjectURL(blob); a.download = name; a.click();
        URL.revokeObjectURL(a.href);
      });
    }
  })();
</script>
</body>
</html>